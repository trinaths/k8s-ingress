{
    "class": "ADC",
    "schemaVersion": "3.11.0",
    "id": "urn:uuid:5cc1afd9-86f6-4c5d-a53f-336454be7e2b",
    "label": "Converted Declaration",
    "remark": "Auto-generated by Project Charon",
    "test": {
        "class": "Tenant",
        "Shared": {
            "class": "Application",
            "template": "shared",
            "ingress_default_svc": {
                "members": [
                    {
                        "addressDiscovery": "static",
                        "servicePort": 80,
                        "serverAddresses": [
                            "10.129.0.151"
                        ]
                    }
                ],
                "class": "Pool"
            },
            "http_redirect_irule_443": {
                "class": "iRule",
                "iRule": "    metadata {\n        user_agent {\n            app-service none\n            persist true\n            value k8s-bigip-ctlr-1.12.0-WIP-tsomanchi-055a581-20191101151702\n        }\n    }\nwhen HTTP_REQUEST {\n\t\t\tset paths [class match -value [HTTP::host] equals https_redirect_dg]\n\t\t\tif {$paths == \"\"} {\n\t\t\t\tset paths [class match -value \"*\" equals https_redirect_dg]\n\t\t\t}\n\t\t\tif {$paths != \"\"} {\n\t\t\t\tset redir 0\n\t\t\t\tset prefix \"\"\n\t\t\t\tforeach s [split $paths \"|\"] {\n\t\t\t\t\tappend prefix \"^\" $s \"($|/*)\"\n\t\t\t\t\tif {[HTTP::path] matches_regex $prefix} {\n\t\t\t\t\t\tset redir 1\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif {$redir == 1} {\n\t\t\t\t\tHTTP::redirect https://[getfield [HTTP::host] \":\" 1]:443[HTTP::uri]\n\t\t\t\t}\n\t\t\t}\n\t\t}"
            },
            "ingress_172_16_3_3_80": {
                "layer4": "tcp",
                "metadata": {
                    "user_agent": {
                        "value": "k8s-bigip-ctlr-1.12.0-WIP-tsomanchi-055a581-20191101151702"
                    }
                },
                "pool": "ingress_default_svc",
                "iRules": [
                    "http_redirect_irule_443"
                ],
                "translateServerAddress": true,
                "translateServerPort": true,
                "class": "Service_HTTP",
                "profileHTTP": {
                    "bigip": "/Common/http"
                },
                "profileTCP": {
                    "bigip": "/Common/tcp"
                },
                "virtualAddresses": [
                    "172.16.3.3%0"
                ],
                "virtualPort": 80,
                "snat": "auto"
            },
            "ingress_172_16_3_3_443": {
                "layer4": "tcp",
                "metadata": {
                    "user_agent": {
                        "value": "k8s-bigip-ctlr-1.12.0-WIP-tsomanchi-055a581-20191101151702"
                    }
                },
                "pool": "ingress_default_svc",
                "translateServerAddress": true,
                "translateServerPort": true,
                "class": "Service_HTTPS",
                "profileHTTP": {
                    "bigip": "/Common/http"
                },
                "profileTCP": {
                    "bigip": "/Common/tcp"
                },
                "serverTLS": "test_secret",
                "virtualAddresses": [
                    "172.16.3.3%0"
                ],
                "virtualPort": 443,
                "snat": "auto"
            },
            "https_redirect_dg": {
                "records": [
                    {
                        "key": "\\\\\\*",
                        "value": "/"
                    }
                ],
                "keyDataType": "string",
                "class": "Data_Group"
            },
            "certificate_default": {
                "class": "Certificate",
                "certificate": {
                    "bigip": "/Common/default.crt"
                },
                "privateKey": {
                    "bigip": "/Common/default.key"
                }
            },
            "default_clientssl_ingress_172_16_3_3_443": {
                "certificates": [
                    {
                        "certificate": "certificate_default"
                    }
                ],
                "class": "TLS_Server"
            },
            "test_secret": {
                "class": "Certificate",
                "certificate": "-----BEGIN CERTIFICATE-----\nMIIC0zCCAbugAwIBAgIJANhccDIo1wdhMA0GCSqGSIb3DQEBCwUAMAAwHhcNMTkx\nMTAxMTAxMzM1WhcNMTkxMTAyMTAxMzM1WjAAMIIBIjANBgkqhkiG9w0BAQEFAAOC\nAQ8AMIIBCgKCAQEAsbPLxEyLkcHzRwavURrQgxbkFvaN7p97pthmXeC9oxIOyofz\nns62VvmIbu7g5+J0MbU2HCcywvX1hKfumLiBOTQCunWL2Z6BGQXdEyc3ASozfOSw\nmA7EG4W6aDkUHmYJkOoFbrqcfj7I0K9wTelYXlk8FqTa9WxlaDgT0GC2FCSZ2R3u\nu4cRkgD8iA94JEVwmyISppVkSlIWmlzmugQLJX+zu+gQpXhkFx9E1RIDjitC/mRr\n5wfwOPlAih5WEmcrFntkzWTTAY1hbfzkuhJIxhdFTC8GV8RA2jwvv7sY91vSAv7R\nl60VPJ21gmfXqBa9TXi8lEGzrsztkRlYdGMlKwIDAQABo1AwTjAdBgNVHQ4EFgQU\nNn8FvnIDnYtkfg+4Afkjzj+vXbwwHwYDVR0jBBgwFoAUNn8FvnIDnYtkfg+4Afkj\nzj+vXbwwDAYDVR0TBAUwAwEB/zANBgkqhkiG9w0BAQsFAAOCAQEADeXFM25XroHK\nVQafBT5yeU2bVjEfrgQw+YSNliOu0LtdCNwwOnWav3jWLk8MRBzG5fAru5cyYfRA\n7UZaKQ68u10soO/wRQ8cLlyNnzQpGpZxYhSXvC6E/6obPf1OUNiJCjMnrAkBmROT\nPSHwPhCUaF2Jvq4pw2koQjn6oME15ulgGXDOfcxAaJbosDbOfjJFj1uRHoIaHQDp\nEzXN33vBrciQszvbWC8dDnYWmeK66ZV6kk/+gJVt+WqH6rH4LEeuWC0CebPxMj81\n9PBG0CwXkgZNSmkPQt9VVgSYjTy9J5+Ej8vq5NFr2ovbu9Pa+YCWOUdzwEQ+R0qR\n5HEjAeZgzg==\n-----END CERTIFICATE-----\n",
                "privateKey": "-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCxs8vETIuRwfNH\nBq9RGtCDFuQW9o3un3um2GZd4L2jEg7Kh/OezrZW+Yhu7uDn4nQxtTYcJzLC9fWE\np+6YuIE5NAK6dYvZnoEZBd0TJzcBKjN85LCYDsQbhbpoORQeZgmQ6gVuupx+PsjQ\nr3BN6VheWTwWpNr1bGVoOBPQYLYUJJnZHe67hxGSAPyID3gkRXCbIhKmlWRKUhaa\nXOa6BAslf7O76BCleGQXH0TVEgOOK0L+ZGvnB/A4+UCKHlYSZysWe2TNZNMBjWFt\n/OS6EkjGF0VMLwZXxEDaPC+/uxj3W9IC/tGXrRU8nbWCZ9eoFr1NeLyUQbOuzO2R\nGVh0YyUrAgMBAAECggEAOXpceHwB0P2ZAOpKnsM7mos2766ELiDr0AXC5q6g6DQZ\nEK10wXM/S1afKLKfkKGQz9s7S1PqeWExLt1asY9MTQJjt4f52kQIod1hqqZOhlPu\nH4GhFS4BhJ12s+tydHqwsWzgoPY/VB5euhFlE+5cJPhcFT7xi9yp2FH7JrWBb3X1\nROLTxM+KzkC1+CNt1hypBXOYzZCrrmEwRAyuwBNZceAMkBQqSzwWSyQb0qfh9Rnt\nsn9gEbOkYqF7OK6CLH+lvxqfb3zDuY2qNVkRflFmZc54klko1oikW5uezxI7+Cfv\nAToS8kBwLapjEwVY9A9VjZ+4DzKJgGjMPZ29NbEZkQKBgQDZQVoDY7tLoyTDmgg2\ncByZeIJUuc3R6UZxqq+bJFYwpYiT+0fNUDKXnyB8KSNjXny51jEY4/xzYawdJMcf\nwAQEC69eEHQc03pfTWqNdjTn3ZtpEWFS/cY1Z4J2P45uHi0GohyKx3DKtHqHfXLz\nRCQbJ3zPyj7FpgpshGZmVoLYDwKBgQDRZK4Z3c5vRhVXkepMGF2BPrsau1H0Z4IP\nSsV8tAOs+vvaT3Wamx6B0giaQ5gBPwU8dyT4bJ9BiqP+urOQVCcUmqxa3MWVYEWi\n5ysNMc+/W1iXjVzLSoQ0gW9gPwVI+YydnkSy61fFtkNkJ2Td5n4TGfbt1z1+MYCt\nwJF7zARlJQKBgBGyCvzfsK+2eBYeg7C7bPjrIeJ4x9TjJUO43VjLmuGXegpjmzOT\n5qsG4QR77U/4sDwKwDEA0N0tBXHSPw3M/AbAVOZafLqkVwFQMu+WwzRnjnL+YWj7\nFpve9HdhMd6yQoSZy61aFUvNa3WBuE0sLaywiK/8DyTWI183YYfQYBPtAoGAXv6y\nDYIXOVwuKoBELymOoif3cnUxBRRAaPefCKgSUtO6lpwd2notKPBEftfTih0xHvFe\nkGWXCoD/TX0eIYhMAoj5UG+AI/h9Hx6I5X+HpGSomHjFdGTl/XwLLzroBudP5+H5\ngMJMG6JIiJNmq1T6NWg+IkDX4PxMSIdoeSVhiRECgYEAkJ8Bob/upko3WW+7yKek\nwJygPDp+u5l0WbLe8Ht7Z3SQblLkxIfgtDJnR/EFNIBJq9Jy+CoHM4qJKNDeMpSS\nkAob+0eSFy7BQ8ynItIsbU818aw0023YS7Xh7XxPkeiwKZGowLSm076HC5A1BxpK\nsHZEBVM/c8ibqBhtt4Cj2FY=\n-----END PRIVATE KEY-----\n"
            }
        }
    }
}
